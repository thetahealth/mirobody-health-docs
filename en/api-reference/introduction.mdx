---
title: "API Introduction"
description: "Overview of the Mirobody Health API"
---

## Welcome to the API

The Mirobody Health API provides programmatic access to health device integrations, data retrieval, and AI-powered health insights.

<Info>
Base URL: `http://localhost:18080` (development) or `https://your-domain.com` (production)
</Info>

## API Categories

<CardGroup cols={3}>
  <Card title="Pulse API" icon="heartbeat" href="/en/api-reference/pulse/providers">
    Connect health devices and retrieve standardized health data from OAuth providers and Apple Health
  </Card>
  <Card title="Chat API" icon="comments" href="/en/api-reference/chat/send-message">
    Stream AI responses from DeepAgent and BaselineAgent with MCP tool integration
  </Card>
  <Card title="MCP Protocol" icon="bolt" href="/en/api-reference/mcp/overview">
    JSON-RPC 2.0 interface for AI agents to discover and call tools and resources
  </Card>
</CardGroup>

## Base URLs

<CodeGroup>
```bash Development
http://localhost:18080
```

```bash Production
https://your-domain.com
```
</CodeGroup>

## Authentication

Most API endpoints require authentication using JWT tokens in the Authorization header:

<CodeGroup>
```bash cURL
curl -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  http://localhost:18080/api/v1/pulse/providers
```

```python Python
import httpx

headers = {"Authorization": "Bearer YOUR_JWT_TOKEN"}
async with httpx.AsyncClient() as client:
    response = await client.get(
        "http://localhost:18080/api/v1/pulse/providers",
        headers=headers
    )
```
</CodeGroup>

### Obtaining Tokens

Tokens are issued through the authentication endpoints:

- **Email Login**: `POST /api/v1/user/email/login`
- **Google OAuth**: `POST /api/v1/user/google/login`
- **Apple Sign In**: `POST /api/v1/user/apple/login`

<Tip>
Some public endpoints (like `/api/v1/pulse/providers`) may work without authentication, but user-specific operations always require valid tokens.
</Tip>

## Rate Limiting

API requests are rate-limited per user and per provider:

- **Default**: 100 requests per minute per user
- **Provider-specific**: Varies by provider (e.g., Garmin: 60 req/min)

<Warning>
Exceeding rate limits returns a `429 Too Many Requests` response with a `Retry-After` header.
</Warning>

## Response Format

All API responses follow a standard format:

<CodeGroup>
```json Success Response
{
  "code": 0,
  "msg": "ok",
  "data": {
    // Response data here
  }
}
```

```json Error Response
{
  "code": -1,
  "msg": "Error message",
  "data": null
}
```
</CodeGroup>

### HTTP Status Codes

| Status | Description |
|--------|-------------|
| `200` | Success |
| `400` | Bad Request - Invalid parameters |
| `401` | Unauthorized - Invalid or missing token |
| `403` | Forbidden - Insufficient permissions |
| `404` | Not Found - Resource doesn't exist |
| `429` | Too Many Requests - Rate limit exceeded |
| `500` | Internal Server Error |

### Common Error Codes

| Code | Description | Resolution |
|------|-------------|------------|
| `0` | Success | - |
| `-1` | General error | Check error message |
| `-32000` | Auth required (MCP) | Authenticate via OAuth flow |
| `-32601` | Method not found (MCP) | Check method name |
| `-32602` | Invalid params (MCP) | Verify parameter format |

## Quick Start

<Steps>
  <Step title="List available providers">
    ```bash
    curl http://localhost:18080/api/v1/pulse/providers
    ```
    
    Returns all supported health device providers (Garmin, Whoop, Apple Health, etc.)
  </Step>

  <Step title="Link a provider (OAuth)">
    ```bash
    curl -X POST http://localhost:18080/api/v1/pulse/user/providers/link \
      -H "Authorization: Bearer YOUR_JWT_TOKEN" \
      -H "Content-Type: application/json" \
      -d '{
        "provider_slug": "theta_garmin",
        "platform": "theta",
        "auth_type": "oauth2"
      }'
    ```
    
    Returns OAuth URL for user authorization
  </Step>

  <Step title="Chat with AI">
    ```bash
    curl -X POST http://localhost:18080/api/v1/chat/stream \
      -H "Authorization: Bearer YOUR_JWT_TOKEN" \
      -H "Content-Type: application/json" \
      -d '{
        "question": "How many steps did I take this week?",
        "agent": "deep",
        "user_id": "user_123"
      }'
    ```
    
    Streams AI response with health data insights
  </Step>

  <Step title="Call MCP tools">
    ```bash
    curl -X POST http://localhost:18080/mcp \
      -H "Authorization: Bearer YOUR_JWT_TOKEN" \
      -H "Content-Type: application/json" \
      -d '{
        "jsonrpc": "2.0",
        "id": 1,
        "method": "tools/call",
        "params": {
          "name": "get_health_indicator",
          "arguments": {"keywords": "steps"}
        }
      }'
    ```
    
    Directly query health data via MCP protocol
  </Step>
</Steps>

## API Endpoints Overview

### Pulse API (`/api/v1/pulse`)

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/providers` | GET | List all available providers |
| `/user/providers` | GET | Get user's linked providers |
| `/user/providers/link` | POST | Link a new provider |
| `/user/providers/unlink` | POST | Unlink a provider |
| `/{platform}/{provider}/callback` | GET | OAuth callback handler |
| `/{platform}/webhook` | POST | Provider webhook receiver |

### Chat API (`/api/v1/chat`)

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/stream` | POST | Stream chat response (SSE) |
| `/history` | GET | Get conversation history |
| `/session` | POST | Create/manage sessions |

### MCP API (`/mcp`)

| Method | Description |
|--------|-------------|
| `initialize` | Handshake and capabilities |
| `tools/list` | List available tools |
| `tools/call` | Execute a tool |
| `resources/list` | List resources |
| `resources/read` | Read a resource |

### File API (`/api/v1/data`)

| Endpoint | Method | Description |
|----------|--------|-------------|
| `/upload-with-processing` | POST | Upload and process health files |
| `/health/data` | GET/POST | Query/store health data |
| `/uploaded-files` | GET | List uploaded files |

## API Versioning

The API uses URL-based versioning:

- **Current**: `/api/v1/...`
- **Future**: `/api/v2/...` (when available)

<Tip>
Always use the versioned endpoints (`/api/v1/...`) to ensure compatibility. The MCP endpoint (`/mcp`) follows its own protocol versioning.
</Tip>

## Webhooks

Mirobody Health supports webhooks for real-time health data updates from providers:

<CodeGroup>
```bash Register Webhook
POST /{platform}/webhook
Content-Type: application/json

{
  "user_id": "user_123",
  "source": "theta_garmin",
  "timestamp": 1705320600000,
  "timezone": "America/Los_Angeles",
  "data": [
    {
      "type": "steps",
      "value": 10543,
      "unit": "steps",
      "timestamp": 1705320600000
    }
  ]
}
```
</CodeGroup>

Webhooks are automatically configured when linking OAuth providers. See [Provider Integration](/development/provider-integration) for details.

## Next Steps

<CardGroup cols={2}>
  <Card title="Pulse API" icon="heartbeat" href="/en/api-reference/pulse/providers">
    Connect and manage health providers
  </Card>
  <Card title="Chat API" icon="comments" href="/en/api-reference/chat/send-message">
    Integrate AI health assistants
  </Card>
  <Card title="MCP Protocol" icon="bolt" href="/en/api-reference/mcp/overview">
    Build AI agent integrations
  </Card>
  <Card title="Examples" icon="code" href="/en/examples/garmin-provider">
    See complete implementation examples
  </Card>
</CardGroup>
